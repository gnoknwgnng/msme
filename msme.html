<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lokalens - Welcome</title>
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f7ff; /* Keep a light background for contrast */
        }
        .input-field {
            border: 3px solid #4a90e2; /* Adjust if needed */
            border-radius: 12px;
            padding: 16px;
            font-size: 18px;
            width: 100%;
            margin-bottom: 20px;
        }
        .button-primary {
            background-color: #0B0B5D; /* Use dark blue for primary buttons */
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }
        .button-primary:hover {
            background-color: #09094A; /* Darker shade for hover */
        }
        .help-icon {
            font-size: 24px;
            color: #0097A7; /* Use teal for help icon */
            cursor: pointer;
        }
        .menu-item {
            transition: all 0.3s;
        }
        .menu-item:hover {
            background-color: #E0FFFF; /* Light teal background for hover */
            transform: translateX(5px);
        }
        .menu-item.text-blue-600 {
            color: #0097A7; /* Active menu item text color */
        }
        .menu-item.bg-blue-50 {
            background-color: #E0FFFF; /* Active menu item background */
        }
        .menu-item.text-gray-700 {
            color: #555; /* Slightly darker grey for inactive text */
        }
        .feature-card {
            transition: all 0.3s;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
    </style>
    <script>
        // Define custom colors using Tailwind config
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                'dark-blue': '#0B0B5D',
                'teal': '#0097A7',
              }
            }
          }
        }
    </script>
</head>
<body>
    <!-- Login/Register Section -->
    <div id="authSection" class="min-h-screen flex flex-col items-center justify-center p-4">
        <!-- Logo and Header -->
        <div class="text-center mb-8">
            <div class="inline-block mb-4">
                <img src="Final_icon_lokalens.ai-removebg-preview.png" alt="Lokalens.ai Logo" class="h-32 w-32 p-2 rounded-full">
            </div>
            <h1 class="text-3xl font-bold text-teal mb-2">Lokalens</h1>
            <p class="text-3xl text-dark-blue mb-2">welcome</p>
        </div>

        <!-- Login Form -->
        <div id="loginContainer" class="bg-white p-8 rounded-2xl shadow-lg w-full max-w-md">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-teal">Sign In</h2>
                <div class="help-icon text-blue-600" id="helpButton">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M12 21a9 9 0 100-18 9 9 0 000 18z" />
                    </svg>
                </div>
            </div>

            <form id="loginForm">
                <div class="mb-6">
                    <label for="loginPhone" class="block text-xl mb-2 text-teal">Phone Number</label>
                    <input type="tel" id="loginPhone" class="input-field" placeholder="Enter your phone number" required>
                </div>
                
                <div class="mb-8">
                    <label for="loginPin" class="block text-xl mb-2 text-teal">PIN</label>
                    <input type="password" id="loginPin" class="input-field" placeholder="Enter your PIN" required>
                </div>
                
                <button type="submit" class="button-primary">
                    <div class="flex items-center justify-center">
                        <span>Sign In</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                        </svg>
                    </div>
                </button>
            </form>

            <div class="mt-6 text-center">
                <p class="text-black text-lg">New user? <a href="#" id="showRegister" class="text-teal font-bold">Register here</a></p>
            </div>
        </div>

        <!-- Registration Form -->
        <div id="registerContainer" class="bg-white p-8 rounded-2xl shadow-lg w-full max-w-md hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-teal">Register</h2>
                <div class="help-icon text-blue-600" id="helpButtonRegister">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M12 21a9 9 0 100-18 9 9 0 000 18z" />
                    </svg>
                </div>
            </div>

            <form id="registerForm">
                <div class="mb-6">
                    <label for="registerName" class="block text-xl mb-2 text-teal">Full Name</label>
                    <input type="text" id="registerName" class="input-field" placeholder="Enter your full name" required>
                </div>

                <div class="mb-6">
                    <label for="registerPhone" class="block text-xl mb-2 text-teal">Phone Number</label>
                    <input type="tel" id="registerPhone" class="input-field" placeholder="Enter your phone number" required>
                </div>
                
                <div class="mb-6">
                    <label for="registerPin" class="block text-xl mb-2 text-teal">Create PIN</label>
                    <input type="password" id="registerPin" class="input-field" placeholder="Create a 4-digit PIN" required minlength="4" maxlength="4" pattern="\d{4}">
                </div>

                <div class="mb-8">
                    <label for="registerPinConfirm" class="block text-xl mb-2 text-teal">Confirm PIN</label>
                    <input type="password" id="registerPinConfirm" class="input-field" placeholder="Confirm your PIN" required minlength="4" maxlength="4" pattern="\d{4}">
                </div>
                
                <button type="submit" class="button-primary">
                    <div class="flex items-center justify-center">
                        <span>Register</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                        </svg>
                    </div>
                </button>
            </form>

            <div class="mt-6 text-center">
                <p class="text-black text-lg">Already registered? <a href="#" id="showLogin" class="text-teal font-bold">Sign in here</a></p>
            </div>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white p-8 rounded-2xl max-w-md w-full">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-teal">Help</h3>
                    <button id="closeHelp" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="space-y-4">
                    <div class="flex items-start">
                        <div class="bg-teal-100 p-2 rounded-full mr-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <p class="text-lg text-black">Enter your phone number without any spaces or dashes.</p>
                    </div>
                    <div class="flex items-start">
                        <div class="bg-teal-100 p-2 rounded-full mr-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                            </svg>
                        </div>
                        <p class="text-lg text-black">Enter your PIN number that was given to you.</p>
                    </div>
                    <div class="flex items-start">
                        <div class="bg-teal-100 p-2 rounded-full mr-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <p class="text-lg text-black">Need more help? Call us at 1800-123-4567</p>
                    </div>
                </div>
                <button id="closeHelpButton" class="mt-6 w-full bg-dark-blue text-white py-3 rounded-xl text-xl font-bold">Close</button>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white p-8 rounded-2xl max-w-md w-full text-center">
                <div class="mb-4 text-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h3 class="text-2xl font-bold text-teal mb-2" id="successTitle">Success!</h3>
                <p class="text-lg text-black mb-6" id="successMessage">Your action was completed successfully.</p>
                <button id="successCloseButton" class="w-full bg-green-600 text-white py-3 rounded-xl text-xl font-bold">Continue</button>
            </div>
        </div>
    </div>

    <!-- Dashboard Section (Version 1) -->
    <div id="dashboardSection" class="hidden">
        <!-- Header -->
        <header class="bg-dark-blue text-white shadow-md">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <div class="flex items-center">
                    <div class="mr-3">
                        <img src="Final_icon_lokalens.ai-removebg-preview.png" alt="Lokalens.ai Logo" class="h-20 w-20">
                    </div>
                    <h1 class="text-2xl font-bold text-teal">Lokalens</h1>
                </div>
                <div class="flex items-center">
                    <div class="mr-4">
                        <span id="welcomeMessage" class="hidden md:inline">Welcome, </span>
                        <span id="userNameDisplay" class="font-bold"></span>
                    </div>
                    <div class="flex flex-col items-end">
                        <button id="logoutBtn" class="bg-white text-teal px-4 py-2 rounded-lg font-bold hover:bg-teal-100 transition">
                        Logout
                    </button>
                        <div class="text-white text-sm mt-1">
                            Credits: <span id="creditCountHeader" class="font-bold text-teal-300">2</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="container mx-auto px-4 py-8">
            <div class="flex flex-col md:flex-row gap-6">
                <!-- Sidebar -->
                <div class="w-full md:w-1/4">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <div class="flex items-center mb-6">
                            <div class="bg-teal-100 p-3 rounded-full mr-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                            </div>
                            <div>
                                <h2 class="text-xl font-bold text-teal" id="sidebarUserName">User</h2>
                                <p class="text-black" id="userPhoneDisplay"></p>
                            </div>
                        </div>

                        <div class="border-t border-gray-200 pt-4">
                            <ul class="space-y-2">
                                <li>
                                    <a href="#" class="menu-item flex items-center p-3 rounded-lg text-teal bg-teal-50">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                                        </svg>
                                        Dashboard
                                    </a>
                                </li>
                                <li>
                                     <a href="#" class="menu-item flex items-center p-3 rounded-lg text-gray-700 hover:bg-teal-50 hover:text-teal">
                                          <svg xmlns="http://www.w3.org/2000/000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                        </svg>
                                         Explore Tools
                                    </a>
                                </li>
                                <li>
                                      <a href="#" class="menu-item flex items-center p-3 rounded-lg text-gray-700 hover:bg-teal-50 hover:text-teal">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                        </svg>
                                         My Tools
                                    </a>
                                </li>
                                <li>
                                     <a href="#" class="menu-item flex items-center p-3 rounded-lg text-gray-700 hover:bg-teal-50 hover:text-teal">
                                         <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                         </svg>
                                         History
                                     </a>
                                 </li>
                                 <li>
                                     <a href="#" class="menu-item flex items-center p-3 rounded-lg text-gray-700 hover:bg-teal-50 hover:text-teal">
                                          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2-1.343-2-3-2zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                          </svg>
                                        Payment
                                    </a>
                                 </li>
                                <li>
                                    <a href="#" class="menu-item flex items-center p-3 rounded-lg text-gray-700 hover:bg-teal-50 hover:text-teal">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                        Help & Support
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Main Content Area -->
                <div class="w-full md:w-3/4">
                    <!-- Dashboard Content -->
                    <div id="dashboardContent" class="content-section">
                    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                            <h2 class="text-2xl font-bold text-teal mb-4">Welcome to Lokalens</h2>
                            <p class="text-black mb-4">Welcome to Lokalens — your strategic AI partner. Transform your business with cutting-edge, AI-driven solutions designed to elevate performance and drive growth.</p>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm text-yellow-700">
                                        Fresh tools available! Tap 'Start Now' to begin
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                        <!-- Search Bar Phase -->
                        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                            <div class="flex items-center">
                                <input type="text" id="searchInput" class="input-field mr-4" placeholder="search for the tools">
                                <button class="bg-dark-blue text-white px-6 py-3 rounded-lg font-bold hover:bg-dark-blue transition">
                                    Search
                                </button>
                            </div>
                            <div id="recommendationsContainer" class="mt-4 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto hidden z-10">
                                <!-- Recommendations will appear here -->
                            </div>
                        </div>

                        <h3 class="text-xl font-bold mb-4">Let's explore</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <!-- Inventory Management Tools -->
                        <div class="bg-white rounded-xl shadow-md overflow-hidden feature-card">
                            <div class="p-6">
                                    <h4 class="text-lg font-bold text-teal mb-2">📦 Inventory Management Tools</h4>
                                    <p class="text-gray-600 mb-4">Track stock levels, manage orders, and reduce wastage with real-time inventory solutions.</p>
                                <div class="flex items-center text-sm text-gray-500 mb-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                    </svg>
                                        Next available: <span class="date-placeholder"></span>
                                </div>
                                    <button class="bg-teal text-white py-2 px-4 rounded-lg font-medium hover:bg-teal-dark transition start-now-button">Start Now</button>
                            </div>
                        </div>

                            <!-- AI Chatbot for Customer Support -->
                        <div class="bg-white rounded-xl shadow-md overflow-hidden feature-card">
                            <div class="p-6">
                                    <h4 class="text-lg font-bold text-teal mb-2">🤖 AI Chatbot for Customer Support</h4>
                                    <p class="text-gray-600 mb-4">Provide 24/7 support and automate customer queries with easy-to-use chatbot platforms.</p>
                                <div class="flex items-center text-sm text-gray-500 mb-4">
                                    <svg xmlns="http://www.w3.org/2000/000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                    </svg>
                                        Next available: <span class="date-placeholder"></span>
                                </div>
                                    <button class="bg-teal text-white py-2 px-4 rounded-lg font-medium hover:bg-teal-dark transition start-now-button">Start Now</button>
                            </div>
                        </div>

                            <!-- Data Analytics Dashboard Tools -->
                        <div class="bg-white rounded-xl shadow-md overflow-hidden feature-card">
                            <div class="p-6">
                                    <h4 class="text-lg font-bold text-teal mb-2">📊 Data Analytics Dashboard Tools</h4>
                                    <p class="text-gray-600 mb-4">Visualize key business data to make smarter decisions and monitor performance easily.</p>
                                <div class="flex items-center text-sm text-gray-500 mb-4">
                                        <svg xmlns="http://www.w3.org/2000/000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                        Next available: <span class="date-placeholder"></span>
                                </div>
                                    <button class="bg-teal text-white py-2 px-4 rounded-lg font-medium hover:bg-teal-dark transition start-now-button">Start Now</button>
                            </div>
                        </div>

                            <!-- HR & Payroll Automation Tools -->
                        <div class="bg-white rounded-xl shadow-md overflow-hidden feature-card">
                            <div class="p-6">
                                    <h4 class="text-lg font-bold text-teal mb-2">💼 HR & Payroll Automation Tools</h4>
                                    <p class="text-gray-600 mb-4">Simplify employee management, attendance, and salary processing for your growing team.</p>
                                <div class="flex items-center text-sm text-gray-500 mb-4">
                                        <svg xmlns="http://www.w3.org/2000/000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                        Next available: <span class="date-placeholder"></span>
                                </div>
                                    <button class="bg-teal text-white py-2 px-4 rounded-lg font-medium hover:bg-teal-dark transition start-now-button">Start Now</button>
                            </div>
                        </div>
                    </div>

                    <h3 class="text-xl font-bold mb-4">Quick Resources</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                            <div class="bg-white p-4 rounded-lg shadow">
                            <div class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                </svg>
                                    <span class="font-bold text-teal">Lokalens Guidebook</span>
                            </div>
                        </div>
                            <div class="bg-white p-4 rounded-lg shadow">
                            <div class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                </svg>
                                    <span class="font-bold text-teal">Request Resources</span>
                            </div>
                        </div>
                            <div class="bg-white p-4 rounded-lg shadow">
                            <div class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                </svg>
                                    <span class="font-bold text-teal">Contact Support</span>
                            </div>
                        </div>
                    </div>
                </div>

                    <!-- Book Tours Content -->
                    <div id="bookToursContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-2xl font-bold text-teal mb-4">Explore Tools</h2>
                            <div class="space-y-6">
                                <div class="bg-white p-6 rounded-lg shadow">
                                    <h3 class="text-xl font-bold mb-3">New tools</h3>
                                    <div class="space-y-4">
                                        <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow">
                                            <div>
                                                <h4 class="font-bold">Data Analytics Dashboard Tools</h4>
                                                <p class="text-gray-600"><span class="dynamic-date-explore">June 4, 2025</span></p>
                                            </div>
                                            <button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">Enroll Now</button>
                                        </div>
                                        <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow">
                                            <div>
                                                <h4 class="font-bold">AI Chatbot for Customer Support</h4>
                                                <p class="text-gray-600"><span class="dynamic-date-explore">June 4, 2025</span></p>
                                            </div>
                                            <button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">Enroll Now</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
            </div>
        </div>

                    <!-- Generic Dummy Page Content -->
                    <div id="dummyPageContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <button id="backToExploreFromDummy" class="mb-4 text-teal hover:underline">&larr; Back to Explore Tools</button>
                            <h2 id="dummyTitle" class="text-2xl font-bold text-teal mb-4"></h2>
                            <p id="dummyDescription" class="text-black mb-4"></p>
                            <p id="dummyDate" class="text-lg text-gray-600 mb-6"></p>
                            <!-- Add more content for the dummy page here as needed -->
                            <p class="text-black">This is a dummy page for the selected feature. Replace this content with actual feature details.</p>
                    </div>
                    </div>

                    <!-- Contact Us Content (Enrollment Form) -->
                    <div id="contactUsContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6 max-w-2xl mx-auto">
                            <button id="backToExploreFromContact" class="mb-4 text-teal hover:underline">&larr; Back to Explore Tools</button>
                            <h2 class="text-2xl font-bold text-center text-dark-blue mb-6">Contact Us</h2>
                            <p class="text-center text-gray-600 mb-8">Ready to start your AI transformation journey?</p>

                            <form class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                                        <label for="fullName" class="block text-gray-700 font-bold mb-2">Full Name</label>
                                        <input type="text" id="fullName" class="input-field" placeholder="Your Name">
                    </div>
                                    <div>
                                        <label for="emailAddress" class="block text-gray-700 font-bold mb-2">Email Address</label>
                                        <input type="email" id="emailAddress" class="input-field" placeholder="Email">
                </div>
                </div>
                                <div>
                                    <label for="companyName" class="block text-gray-700 font-bold mb-2">Company Name</label>
                                    <input type="text" id="companyName" class="input-field" placeholder="Company">
            </div>
                                <div>
                                    <label for="yourMessage" class="block text-gray-700 font-bold mb-2">Your Message</label>
                                    <textarea id="yourMessage" class="input-field h-32" placeholder="Message"></textarea>
    </div>
                                <button type="submit" class="w-full bg-teal text-white py-3 rounded-lg font-bold hover:bg-teal-dark transition">SEND MESSAGE</button>
                            </form>

                            <div class="mt-8 text-center text-gray-600">
                                <p class="mb-2">or contact us directly:</p>
                                <div class="flex justify-center items-center space-x-4">
                                    <a href="mailto:info@zylense.ai" class="flex items-center text-teal hover:underline">
                                        <svg xmlns="http://www.w3.org/2000/000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                        </svg>
                                        info@zylense.ai
                                    </a>
                                    <a href="tel:+919121552086" class="flex items-center text-teal hover:underline">
                                        <svg xmlns="http://www.w3.org/2000/000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                        </svg>
                                        +91-9121552086
                                    </a>
                                </div>
                            </div>
                        </div>
    </div>

                    <!-- My Bookings Content -->
                    <div id="myBookingsContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-2xl font-bold mb-4">My Tools</h2>
                            <div class="space-y-4">
                                <div class="bg-white p-6 rounded-lg shadow">
                                    <h3 class="text-xl font-bold mb-3">Current Tools</h3>
                                    <div class="space-y-4">
                                        <div class="p-4 bg-white rounded-lg shadow">
                                            <div class="flex justify-between items-center">
                                                <div>
                                                    <h4 class="font-bold">Financial Management Tools</h4>
                                                    <p class="text-gray-600">June 25, 2025</p>
                                                </div>
                                                <div class="mt-0 text-center p-2 rounded-lg">
                                                    <!-- Replaced button with email form -->
                                                    <div class="bg-white p-6 rounded-lg shadow">
                                                        <h4 class="font-bold mb-3">Send Email via AI</h4>
                                                        <form id="sendEmailForm" class="space-y-4">
                                                            <div>
                                                                <label for="senderName" class="block text-gray-700 font-bold mb-1 text-left">Your Name</label>
                                                                <input type="text" id="senderName" class="input-field text-base" placeholder="Your Name" required>
                                                            </div>
                                                            <div>
                                                                <label for="emailSubject" class="block text-gray-700 font-bold mb-1 text-left">Subject</label>
                                                                <input type="text" id="emailSubject" class="input-field text-base" placeholder="Email Subject" required>
                                                            </div>
                                                            <div>
                                                                <label for="recipientEmail" class="block text-gray-700 font-bold mb-1 text-left">Recipient Email</label>
                                                                <input type="email" id="recipientEmail" class="input-field text-base" placeholder="Recipient Email" required>
                                                            </div>
                                                            <button type="submit" class="w-full bg-teal text-white py-2 rounded-lg font-bold hover:bg-teal-dark transition text-lg">
                                                                Send Email
                                                            </button>
                                                        </form>
                                                    </div>
                                                    <!-- End email form -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Help & Support Content -->
                    <div id="helpSupportContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-2xl font-bold text-teal mb-4">Help & Support</h2>
                            <div class="space-y-6">
                                <div class="bg-teal-50 p-6 rounded-lg">
                                    <h3 class="text-xl font-bold mb-3">Contact Information</h3>
                                    <div class="space-y-4">
                                        <div class="flex items-center justify-center text-lg text-black">
                                            <a href="mailto:info@zylense.ai" class="text-teal hover:underline">info@zylense.ai</a>
                                            <span class="mx-2">|</span>
                                            <a href="tel:+919121552086" class="text-teal hover:underline">+91-9121552086</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- History Content -->
                    <div id="historyContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-2xl font-bold text-teal mb-4">My History</h2>
                            <p class="text-black">This is where your history details will be displayed.</p>
                            <!-- Add more history content here later -->
                        </div>
                    </div>

                    <!-- Upgrade Credits Content -->
                    <div id="upgradeCreditsContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-3xl font-bold text-center text-teal mb-8">Upgrade your plan</h2>
                             <!-- Personal/Business Toggle (Placeholder) -->
                             <div class="flex justify-center mb-8">
                                 <button class="px-6 py-2 rounded-l-lg bg-teal text-white font-bold">Personal</button>
                                 <button class="px-6 py-2 rounded-r-lg bg-gray-200 text-gray-800 font-bold">Business</button>
                             </div>

                             <!-- Plan Cards Container -->
                             <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                 <!-- Free Plan Card (Placeholder) -->
                                 <div class="bg-white rounded-xl shadow-md p-6 text-center">
                                     <h3 class="text-2xl font-bold mb-4">Bronze</h3>
                                     <p class="text-xl mb-4"><span class="font-bold text-teal">₹0</span>/month</p>
                                     <p class="text-gray-600 mb-6">Basic features to get started</p>
                                     <button class="w-full bg-gray-300 text-gray-800 py-3 rounded-lg font-bold cursor-not-allowed">Your current plan</button>
                                 </div>

                                 <!-- Plus Plan Card (Placeholder) -->
                                 <div class="bg-white rounded-xl shadow-md p-6 text-center border-2 border-teal">
                                      <h3 class="text-2xl font-bold text-teal mb-4">Silver</h3>
                                     <p class="text-xl mb-4"><span class="font-bold text-teal">₹200</span>/month</p>
                                     <p class="text-gray-600 mb-6">Enhanced tools for small business growth</p>
                                     <button class="w-full bg-teal text-white py-3 rounded-lg font-bold hover:bg-teal-dark transition">Get Plus</button>
                                 </div>

                                 <!-- Pro Plan Card (Placeholder) -->
                                 <div class="bg-white rounded-xl shadow-md p-6 text-center">
                                      <h3 class="text-2xl font-bold mb-4">Gold</h3>
                                     <p class="text-xl mb-4"><span class="font-bold text-teal">₹1000</span>/month</p>
                                     <p class="text-gray-600 mb-6">Full-featured automation suite for scaling up</p>
                                     <button class="w-full bg-dark-blue text-white py-3 rounded-lg font-bold hover:bg-dark-blue transition">Get Pro</button>
                                 </div>
                             </div>
                         </div>
                     </div>

                    <!-- Payment Page Content -->
                    <div id="paymentContent" class="content-section hidden">
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-2xl font-bold text-teal mb-4">Payment Details</h2>
                            <div class="max-w-md mx-auto">
                                <div class="bg-blue-50 p-6 rounded-lg mb-6">
                                    <h3 class="text-xl font-bold mb-4">Complete Your Payment</h3>
                                    <form id="paymentForm" class="space-y-4">
                                        <div>
                                            <label class="block text-gray-700 mb-2">Card Number</label>
                                            <input type="text" class="input-field" placeholder="1234 5678 9012 3456" maxlength="19">
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-gray-700 mb-2">Expiry Date</label>
                                                <input type="text" class="input-field" placeholder="MM/YY" maxlength="5">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 mb-2">CVV</label>
                                                <input type="text" class="input-field" placeholder="123" maxlength="3">
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-gray-700 mb-2">Name on Card</label>
                                            <input type="text" class="input-field" placeholder="John Doe">
                                        </div>
                                        <button type="submit" class="w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 text-lg font-bold">
                                            Pay Now
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-6 mt-8">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row items-center justify-between text-gray-400">
                    <!-- Left Column: Logo -->
                    <div class="mb-4 md:mb-0 w-1/3 text-center md:text-left">
                        <img src="ak.png" alt="Zylense.ai Logo" class="h-20 inline-block md:inline">
                    </div>

                    <!-- Center Column: Copyright and Policy Links -->
                    <div class="mb-4 md:mb-0 w-full md:w-1/3 text-left">
                        <p>&copy; 2024-25 Zylense.ai. All rights reserved. | <a href="#" class="hover:underline">Privacy Policy</a> | <a href="#" class="hover:underline">Terms of Service</a></p>
                    </div>

                    <!-- Right Column: Contact and Social Media -->
                    <div class="text-center md:text-right">
                        <h4 class="font-bold mb-2">Contact Us</h4>
                        <p>Email: info@zylense.ai</p>
                        <p>Phone:+91-9121552086</p>
                        <div class="flex justify-center md:justify-end space-x-4 mt-2">
                            <a href="https://www.linkedin.com/company/zylense-ai/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="hover:text-white">
                                <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.582-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.764 7 2.405v6.83z"></path></svg>
                            </a>
                            <a href="https://www.facebook.com/people/Zylense-AI/61574972251302/" target="_blank" rel="noopener noreferrer" class="hover:text-white">
                                <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M24 12c0-6.627-5.373-12-12-12s-12 5.373-12 12 5.373 12 12 12 12-5.373 12-12zm-16.994 0l1.599 9.991h3.387l-1.574-9.853 4.825-.004 1.008-6.278-4.824.004 1.649-10.297h-3.388l-1.649 10.297-1.601.001-1.598-9.99h-3.387l1.599 9.99-3.387.001-.001 6.275 3.387-.001z"></path></svg>
                            </a>
                            <a href="https://www.instagram.com/zylenseai/" target="_blank" rel="noopener noreferrer" class="hover:text-white">
                                <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2.163c3.178 0 3.585.016 4.85.071 4.045.165 6.102 2.312 6.21 6.354.054 1.264.07 1.671.07 4.849 0 3.178-.016 3.584-.071 4.85-.108 4.045-2.156 6.101-6.199 6.209-1.265.054-1.671.07-4.849.07-3.178 0-3.584-.016-4.85-.071-4.041-.108-6.101-2.16-6.21-6.204-.054-1.264-.07-1.671-.07-4.849 0-3.178.016-3.584.071-4.85.11-4.043 2.161-6.101 6.199-6.21.944-.048 1.35-.065 3.21-.065zm0-2.163c-3.259 0-3.667.014-4.947.073-4.407.18-6.707 2.444-6.811 6.842-.059 1.271-.073 1.677-.073 4.946 0 3.26.014 3.667.072 4.946.102 4.397 2.35 6.691 6.759 6.81.854.052 1.123.064 3.368.064l.012 0c2.242 0 2.511-.012 3.367-.064 4.402-.179 6.65-.477 6.81-6.817.059-1.269.073-1.677.073-4.946 0-3.259-.014-3.667-.072-4.947-.18-4.403-2.444-6.70-6.841-6.811-1.27-.058-1.676-.072-4.946-.072zm0 6.898c-3.313 0-6 2.687-6 6s2.687 6 6 6 6-2.687 6-6-2.687-6-6-6zm0 10.163c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg>
                            </a>
                    </div>
                </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // DOM Elements
        const authSection = document.getElementById('authSection');
        const dashboardSection = document.getElementById('dashboardSection');
        const loginContainer = document.getElementById('loginContainer');
        const registerContainer = document.getElementById('registerContainer');
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const userNameDisplay = document.getElementById('userNameDisplay');
        const sidebarUserName = document.getElementById('sidebarUserName');
        const userPhoneDisplay = document.getElementById('userPhoneDisplay');

        // Help modal functionality
        const helpButton = document.getElementById('helpButton');
        const helpButtonRegister = document.getElementById('helpButtonRegister');
        const helpModal = document.getElementById('helpModal');
        const closeHelp = document.getElementById('closeHelp');
        const closeHelpButton = document.getElementById('closeHelpButton');

        // Success modal
        const successModal = document.getElementById('successModal');
        const successTitle = document.getElementById('successTitle');
        const successMessage = document.getElementById('successMessage');
        const successCloseButton = document.getElementById('successCloseButton');

        // Show/hide containers
        showRegister.addEventListener('click', (e) => {
            e.preventDefault();
            loginContainer.classList.add('hidden');
            registerContainer.classList.remove('hidden');
        });

        showLogin.addEventListener('click', (e) => {
            e.preventDefault();
            registerContainer.classList.add('hidden');
            loginContainer.classList.remove('hidden');
        });

        // Help modal
        function showHelpModal() {
            helpModal.classList.remove('hidden');
        }

        function hideHelpModal() {
            helpModal.classList.add('hidden');
        }

        helpButton.addEventListener('click', showHelpModal);
        helpButtonRegister.addEventListener('click', showHelpModal);
        closeHelp.addEventListener('click', hideHelpModal);
        closeHelpButton.addEventListener('click', hideHelpModal);

        // Success modal functions
        function showSuccessModal(title, message, callback) {
            successTitle.textContent = title;
            successMessage.textContent = message;
            successModal.classList.remove('hidden');
            
            successCloseButton.onclick = () => {
                successModal.classList.add('hidden');
                if (callback) callback();
            };
        }

        // Show dashboard function
        function showDashboard(userData) {
            authSection.classList.add('hidden');
            dashboardSection.classList.remove('hidden');
            
            // Update user info in dashboard
            userNameDisplay.textContent = userData.name;
            sidebarUserName.textContent = userData.name;
            userPhoneDisplay.textContent = userData.phone;
            console.log('Setting phone number:', userData.phone); // Debugging line
        }

        // User registration and login functionality
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const phone = document.getElementById('registerPhone').value;
            const pin = document.getElementById('registerPin').value;
            const pinConfirm = document.getElementById('registerPinConfirm').value;
            
            // Simple validation
            if (pin !== pinConfirm) {
                alert('PINs do not match. Please try again.');
                return;
            }
            
            if (pin.length !== 4 || !/^\d+$/.test(pin)) {
                alert('PIN must be exactly 4 digits.');
                return;
            }
            
            // Store user data in localStorage
            const users = JSON.parse(localStorage.getItem('msmeUsers') || '{}');
            
            // Check if user already exists
            if (users[phone]) {
                alert('A user with this phone number already exists.');
                return;
            }
            
            // Save new user
            users[phone] = {
                name: name,
                pin: pin
            };
            
            localStorage.setItem('msmeUsers', JSON.stringify(users));
            
            // Show success message
            showSuccessModal('Registration Successful!', 'Your account has been created. You can now log in.', () => {
                registerContainer.classList.add('hidden');
                loginContainer.classList.remove('hidden');
                registerForm.reset();

                // Reset credits for the new user
                credits = 2;
                if (creditCountHeaderSpan) { // Update header credit count
                    creditCountHeaderSpan.textContent = credits;
                }
            });
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const phone = document.getElementById('loginPhone').value;
            const pin = document.getElementById('loginPin').value;
            
            // Get users from localStorage
            const users = JSON.parse(localStorage.getItem('msmeUsers') || '{}');
            
            // Check if user exists and PIN matches
            if (users[phone] && users[phone].pin === pin) {
                // Set current user
                const userData = {
                    phone: phone,
                    name: users[phone].name
                };
                
                localStorage.setItem('currentUser', JSON.stringify(userData));
                
                // Show dashboard
                showDashboard(userData);
                loginForm.reset();

                // Initialize credits for the logged-in user (if not stored per user, default to 2)
                // In a real app, load user-specific credits here
                credits = 2; // Assuming fresh login means fresh credits for now
                 if (creditCountHeaderSpan) { // Update header credit count
                    creditCountHeaderSpan.textContent = credits;
                }

            } else {
                alert('Invalid phone number or PIN. Please try again.');
            }
        });

        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('currentUser');
            dashboardSection.classList.add('hidden');
            authSection.classList.remove('hidden');

            // Reset credits on logout (optional, depending on desired behavior)
            credits = 2;
            if (creditCountHeaderSpan) { // Update header credit count
                 creditCountHeaderSpan.textContent = credits;
            }
        });

        // Check if user is already logged in
        window.addEventListener('load', () => {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (currentUser) {
                showDashboard(currentUser);

                // Manually trigger click for the default Dashboard menu item
                const dashboardMenuItem = document.querySelector('.menu-item');
                if (dashboardMenuItem && dashboardMenuItem.textContent.trim() === 'Dashboard') {
                    dashboardMenuItem.click(); // Simulate click to show dashboard content
                }
            } else {
            // Add a test user if none exists
            const users = JSON.parse(localStorage.getItem('msmeUsers') || '{}');
            if (Object.keys(users).length === 0) {
                users['1234'] = {
                    name: 'Test User',
                    pin: '1234'
                };
                localStorage.setItem('msmeUsers', JSON.stringify(users));
            }
            }
             // Initialize credits display on page load
            if (creditCountHeaderSpan) { // Update header credit count
                 creditCountHeaderSpan.textContent = credits;
            }
        });

        // Menu navigation functionality
        const menuItems = document.querySelectorAll('.menu-item');
        const contentSections = document.querySelectorAll('.content-section');

        menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const clickedText = item.textContent.trim();

                // Remove active class from all menu items
                menuItems.forEach(mi => {
                    mi.classList.remove('text-blue-600', 'bg-blue-50', 'text-teal', 'bg-teal-50'); // Remove old and new blue/teal classes
                    mi.classList.add('text-gray-700');
                });

                // Add active class to clicked menu item
                item.classList.remove('text-gray-700');
                item.classList.add('text-teal', 'bg-teal-50'); // Apply new teal classes

                // Hide all content sections
                contentSections.forEach(section => {
                    section.classList.add('hidden');
                });

                // Show corresponding content section
                // Convert menu text to expected content ID format
                let contentId;
                if (clickedText === 'Dashboard') {
                    contentId = 'dashboardContent';
                } else if (clickedText === 'Explore Tools') {
                    contentId = 'bookToursContent';
                } else if (clickedText === 'My Tools') {
                    contentId = 'myBookingsContent';
                } else if (clickedText === 'Help & Support') {
                    contentId = 'helpSupportContent';
                } else if (clickedText === 'History') {
                    contentId = 'historyContent';
                } else if (clickedText === 'Payment') { /* Handle Payment menu item - links to Upgrade Credits */
                    contentId = 'paymentContent'; // Show payment page
                    contentId = 'upgradeCreditsContent'; // Show upgrade credits page
                } else { // Exclude Credits from section switching if it's moved to header
                    console.error(`Warning: No content ID found for menu item text: ${clickedText}`);
                    return; // Stop if no matching content section is found
                }

                console.log(`Looking for content section with ID: ${contentId}`);
                const targetContent = document.getElementById(contentId);

                if (targetContent) {
                    targetContent.classList.remove('hidden');
                    console.log(`Showed section: ${contentId}`);
                } else {
                    console.error(`Error: Target content section not found with ID: ${contentId}`);
                }
            });
        });

        // Set Dashboard as active by default on load
        window.addEventListener('load', () => {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (currentUser) {
                showDashboard(currentUser);

                // Manually trigger click for the default Dashboard menu item
                const dashboardMenuItem = document.querySelector('.menu-item');
                if (dashboardMenuItem && dashboardMenuItem.textContent.trim() === 'Dashboard') {
                    dashboardMenuItem.click(); // Simulate click to show dashboard content
                }
            }
        });

        // Use button functionality
        const useButtons = document.querySelectorAll('.use-button'); // Keep this to remove listeners later or remove entirely
        // let useCount = 0; // Removed useCount as credits are now used
        const creditCountSpan = document.getElementById('creditCount'); // Keep this for potential future use or remove if credits are only in header
        // creditCountHeaderSpan already defined above
        // credits variable already defined above

        // Remove existing 'use-button' click listeners
        useButtons.forEach(button => {
            // It's difficult to remove dynamically added listeners without storing references,
            // but since we are replacing the button, the old listeners will no longer apply.
            // If the button wasn't being replaced, we would need a more complex approach.
        });

        // Email sending form functionality
        // Move this part inside the DOMContentLoaded listener

        // Comment out the existing direct call to get the form and add the listener
        // const sendEmailForm = document.getElementById('sendEmailForm');
        // const n8nWebhookUrl = 'https://abhiak112.app.n8n.cloud/webhook-test/send-mail';

        // console.log('Attempting to find sendEmailForm:', sendEmailForm); // Add log here

        // if (sendEmailForm) {
        //     sendEmailForm.addEventListener('submit', async (e) => {
        //         e.preventDefault();
        //         console.log('Send Email button clicked.');
        //         // ... rest of the email sending logic
        //     });
        // }

        // Add DOMContentLoaded listener
        document.addEventListener('DOMContentLoaded', () => {
             console.log('DOMContentLoaded fired.'); // Log to confirm listener runs

            // Email sending form functionality - now inside DOMContentLoaded
            const sendEmailForm = document.getElementById('sendEmailForm');
            const n8nWebhookUrl = 'https://abhiak112.app.n8n.cloud/webhook-test/send-mail';

            console.log('Attempting to find sendEmailForm inside DOMContentLoaded:', sendEmailForm); // Log here

             // Get the new header span and initialize credits here
             const creditCountHeaderSpan = document.getElementById('creditCountHeader'); // Get the new header span
             let credits = 2; // Initial credits - Initialize inside DOMContentLoaded

             console.log('Credits variable initialized inside DOMContentLoaded:', credits); // Log credits
             console.log('creditCountHeaderSpan found inside DOMContentLoaded:', creditCountHeaderSpan); // Log the element

             // Update displayed credits on load - moved inside DOMContentLoaded
            if (creditCountHeaderSpan) {
                 creditCountHeaderSpan.textContent = credits;
            }

            if (sendEmailForm) {
                sendEmailForm.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    console.log('Send Email button clicked (inside DOMContentLoaded).'); // Log button click

                    if (credits <= 0) {
                        // Hide all content sections
                        contentSections.forEach(section => {
                            section.classList.add('hidden');
                        });

                        // Show upgrade credits content
                        const upgradeCreditsContent = document.getElementById('upgradeCreditsContent');
                        if (upgradeCreditsContent) {
                            upgradeCreditsContent.classList.remove('hidden');
                        }

                        showSuccessModal('No Credits Left', 'Please upgrade your credits to send emails.', () => {
                            // Optional: Reset form or take other action
                        });
                        return; // Stop execution if no credits
                    }

                    // Get form data
                    const senderName = document.getElementById('senderName').value;
                    const emailSubject = document.getElementById('emailSubject').value;
                    const recipientEmail = document.getElementById('recipientEmail').value;

                    console.log('Form data collected:', { senderName, emailSubject, recipientEmail }); // Log form data

                    // Decrement credits and update display
                    credits--;
                    if (creditCountHeaderSpan) {
                        creditCountHeaderSpan.textContent = credits;
                    }

                    // Prepare data for webhook
                    const emailData = {
                        name: senderName,
                        subject: emailSubject,
                        email: recipientEmail
                    };

                    console.log('Data being sent to webhook:', emailData); // Log data being sent
                    console.log('Attempting to send POST request to:', n8nWebhookUrl); // Log webhook URL

                    try {
                        // Send data to n8n webhook
                        const response = await fetch(n8nWebhookUrl, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(emailData),
                        });

                        if (response.ok) {
                            // Assuming a 2xx response means success
                            console.log('Webhook response OK:', response.status); // Log successful response
                            showSuccessModal('Email Sent!', `Your email has been sent. You have ${credits} credit(s) remaining.`, () => {
                                sendEmailForm.reset(); // Clear the form
                            });
                        } else {
                            // Handle non-OK responses
                            const errorText = await response.text();
                            console.error('Webhook response not OK:', response.status, errorText); // Log non-OK response
                            showSuccessModal('Error', `Failed to send email. Status: ${response.status}, Message: ${errorText}`, () => {
                                // Increment credits back if the request failed before reaching the service?
                                // This depends on webhook behavior - for simplicity, we won't increment back for now.
                            });

                        }

                    } catch (error) {
                        // Handle network errors or other issues
                        console.error('Error sending email:', error); // Log fetch errors
                        showSuccessModal('Error', `Failed to send email: ${error.message}. You have ${credits} credit(s) remaining.`, () => {
                             // Increment credits back on catch? Again, depends on desired behavior.
                        });

                    }
                });
            } else {
                console.error('Error: sendEmailForm not found!'); // Log if form is still not found
            }
        });

        // Payment form submission
        const paymentForm = document.getElementById('paymentForm');
        if (paymentForm) {
            paymentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                // Handle payment form submission
                // This is a placeholder and should be replaced with actual payment processing logic
                showSuccessModal('Payment Successful', 'Your payment was processed successfully.', () => {
                    // Reset payment form
                    paymentForm.reset();
                });
            });
        }

        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js').then(registration => {
                    console.log('Service Worker registered with scope:', registration.scope);
                }).catch(error => {
                    console.error('Service Worker registration failed:', error);
                });
            });
        }

        // Search recommendations functionality
        const searchInput = document.getElementById('searchInput');
        const recommendationsContainer = document.getElementById('recommendationsContainer');

        // Collect all searchable items (tour titles and quick resources)
        const searchableItems = [];

        // Add tour titles
        document.querySelectorAll('#dashboardContent .feature-card h4').forEach(heading => {
            searchableItems.push(heading.textContent.trim());
        });

        // Add quick resource names
        document.querySelectorAll('#dashboardContent .grid > div > div > span').forEach(span => {
            searchableItems.push(span.textContent.trim());
        });

        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase();
            recommendationsContainer.innerHTML = ''; // Clear previous recommendations

            if (searchTerm.length === 0) {
                recommendationsContainer.classList.add('hidden');
                return;
            }

            const matchingItems = searchableItems.filter(item => item.toLowerCase().includes(searchTerm));

            if (matchingItems.length > 0) {
                recommendationsContainer.classList.remove('hidden');
                matchingItems.forEach(item => {
                    const recElement = document.createElement('div');
                    recElement.classList.add('p-2', 'cursor-pointer', 'hover:bg-gray-200');
                    recElement.textContent = item;
                    recElement.addEventListener('click', () => {
                        searchInput.value = item;
                        recommendationsContainer.classList.add('hidden');
                        // You can add logic here to actually search or navigate based on the selected recommendation
                    });
                    recommendationsContainer.appendChild(recElement);
                });
            } else {
                recommendationsContainer.classList.add('hidden');
            }
        });

        // Hide recommendations when clicking outside
        document.addEventListener('click', (e) => {
            if (!recommendationsContainer.contains(e.target) && e.target !== searchInput) {
                recommendationsContainer.classList.add('hidden');
            }
        });

        // Enroll Now button functionality
        const enrollButtons = document.querySelectorAll('#bookToursContent .bg-blue-500'); // Select 'Enroll Now' buttons within Explore Tools
        const contactUsContent = document.getElementById('contactUsContent');
        const backToExploreFromContactButton = document.getElementById('backToExploreFromContact');
        const bookToursContent = document.getElementById('bookToursContent');

        enrollButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Show contact us section
                contentSections.forEach(section => {
                    section.classList.add('hidden');
                });
                contactUsContent.classList.remove('hidden');
            });
        });

        // Back button functionality
        backToExploreFromContactButton.addEventListener('click', () => {
            contactUsContent.classList.add('hidden');
            bookToursContent.classList.remove('hidden');
            
            // Keep 'Explore Tools' menu item active
            menuItems.forEach(mi => {
                mi.classList.remove('text-teal', 'bg-teal-50');
                mi.classList.add('text-gray-700');
            });
            const exploreToolsMenuItem = document.querySelector('.menu-item'); // Find the Explore Tools menu item
             if (exploreToolsMenuItem && exploreToolsMenuItem.textContent.trim() === 'Explore Tools') {
                exploreToolsMenuItem.classList.remove('text-gray-700');
                exploreToolsMenuItem.classList.add('text-teal', 'bg-teal-50');
            }
        });

        // Updated Enroll Now button functionality (now Start Now buttons in dashboard)
        const startNowButtons = document.querySelectorAll('#dashboardContent .start-now-button');

        const dummyPageContent = document.getElementById('dummyPageContent');
        const dummyTitle = document.getElementById('dummyTitle');
        const dummyDescription = document.getElementById('dummyDescription');
        const dummyDate = document.getElementById('dummyDate');
        const backToExploreFromDummyButton = document.getElementById('backToExploreFromDummy');

        startNowButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent default button behavior

                // Find parent feature card
                const featureCard = button.closest('.feature-card');
                if (featureCard) {
                    // Extract title, description, and date
                    const title = featureCard.querySelector('h4').textContent.trim().replace(/📦|🤖|📊|💼/g, '').trim(); // Remove emojis
                    const description = featureCard.querySelector('p:not([id])').textContent.trim(); // Select the paragraph that's not the date
                    const date = featureCard.querySelector('.text-sm').textContent.trim();

                    // Populate dummy page details
                    dummyTitle.textContent = title;
                    dummyDescription.textContent = description;
                    dummyDate.textContent = date;

                    // Hide all content sections
                    contentSections.forEach(section => {
                        section.classList.add('hidden');
                    });

                    // Show dummy page section
                    dummyPageContent.classList.remove('hidden');
                }
            });
        });

        // Back button functionality for the dummy page
        backToExploreFromDummyButton.addEventListener('click', () => {
            dummyPageContent.classList.add('hidden');
            bookToursContent.classList.remove('hidden'); // Assuming Explore Tools is the default view for this section
            
            // Keep 'Explore Tools' menu item active
            menuItems.forEach(mi => {
                mi.classList.remove('text-teal', 'bg-teal-50');
                mi.classList.add('text-gray-700');
            });
            const exploreToolsMenuItem = document.querySelector('.menu-item'); // Find the Explore Tools menu item
             if (exploreToolsMenuItem && exploreToolsMenuItem.textContent.trim() === 'Explore Tools') {
                exploreToolsMenuItem.classList.remove('text-gray-700');
                exploreToolsMenuItem.classList.add('text-teal', 'bg-teal-50');
            }
        });

    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const datePlaceholders = document.querySelectorAll('.date-placeholder');
            const today = new Date();

            // Function to add days to a date
            function addDays(date, days) {
                const result = new Date(date);
                result.setDate(result.getDate() + days);
                return result;
            }

            // Define base dates for each feature (adjust days as needed)
            const baseDates = [
                addDays(today, 5), // Inventory Management
                addDays(today, 7), // AI Chatbot
                addDays(today, 10), // Data Analytics
                addDays(today, 14)  // HR & Payroll
            ];

            // Update each date placeholder with a dynamic date
            datePlaceholders.forEach((placeholder, index) => {
                if (index < baseDates.length) {
                    const options = { year: 'numeric', month: 'long', day: 'numeric' };
                    placeholder.textContent = baseDates[index].toLocaleDateString(undefined, options);
                }
            });
        });
    </script>
</body>
</html>